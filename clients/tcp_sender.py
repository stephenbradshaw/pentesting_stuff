import socket
import ssl

def send_receive(host, port, file, wrap_ssl=False):
    client_socket = socket.socket()
    client_socket.settimeout(5)
    
    if wrap_ssl:
        context = ssl._create_unverified_context()
        client_socket = context.wrap_socket(client_socket)
        #client_socket = ssl.wrap_socket(client_socket, ssl_version=ssl.PROTOCOL_TLSv1_2)

    client_socket.connect((host, port))
    client_socket.send(open(file, 'rb').read())
    out = b''
    moar = True
    while moar:
        try:
            d = client_socket.recv(1024)  
            if len(d) < 1:
                moar = False
            out += d
        except (TimeoutError, ConnectionResetError):
            moar = False
        except:
            break
            
    client_socket.close()
    return out
