# Python snippets

Some snippets of Python code that I use too infrequently to remember, but frequently enough to be annoyed every time I have to track down an example again.

## iPython3 execfile helper

Python3 removes execfile, so its nice to have a helper.

Simple:

`coder = lambda  x : compile(open(x).read(), x, 'exec')`

Use it like so:

`exec(coder(filename))`


More complex including setting the global __file__ variable to the exec filename:

`coder = lambda  x : [compile(open(x).read(), x, 'exec'), globals().update({'__file__' : x})]`

Use:

`exec(*coder(filename))`


## Generate sortable timestamp

So the necessary import

`import datetime`

Timestamp with only the date

    def timestamp():
        return datetime.datetime.now().strftime('%Y%m%d')
        
Timestamp with date and time

    def timestamp():
        return datetime.datetime.now().strftime('%Y%m%d%H%M%S')
        
        
## An example HTML parser

An example of a HTMLPaser, you will need to edit this to make it useful, but remembering the template is always annoying.

    from html.parser import HTMLParser
    class HParser(HTMLParser):
        '''Example HTML parser'''
    
        def __init__(self):
            HTMLParser.__init__(self)
            self.outData = ''
            self.divData = ''
            self.inHtag = False
            self.inDtag = False
    
    
        def handle_starttag(self, tag, attrs):
            if tag == 'h1':
                inHtag = True
            elif tag == 'div':
                if (self.get_starttag_text().find('content') > -1):
                    self.inDtag = True
        
        def handle_endtag(self, tag):
            if tag == "h1":
                self.inHtag = False
            elif tag == "div":
                self.inDtag = False
    
    
        def handle_data(self, data):
            if self.inHtag:
                self.outData = self.outData + data
            elif self.inDtag:
                self.divData = self.divData + data
                
    
        def close(self):
            return [ self.outData, self.divData ]
